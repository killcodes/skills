# ğŸ” JStack Analyzer æŠ€èƒ½

JStackåˆ†æå™¨æ˜¯ä¸€ä¸ªä¸“ä¸šçš„Javaçº¿ç¨‹åˆ†æå·¥å…·ï¼Œèƒ½å¤Ÿè§£æjstackå‘½ä»¤çš„è¾“å‡ºæ–‡ä»¶å¹¶ç”Ÿæˆè¯¦ç»†çš„HTMLåˆ†ææŠ¥å‘Šã€‚

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

- **ğŸ”§ æ™ºèƒ½è§£æ**ï¼šè‡ªåŠ¨è§£æjstackè¾“å‡ºæ–‡ä»¶ï¼Œæå–çº¿ç¨‹ä¿¡æ¯
- **ğŸ“Š å¯è§†åŒ–æŠ¥å‘Š**ï¼šç”Ÿæˆç¾è§‚çš„HTMLæŠ¥å‘Šï¼ŒåŒ…å«å›¾è¡¨å’Œç»Ÿè®¡æ•°æ®
- **ğŸ¨ å¤šä¸»é¢˜æ”¯æŒ**ï¼šæä¾›minimalã€modernã€classicç­‰å¤šç§è®¾è®¡ä¸»é¢˜
- **ğŸ“ˆ çŠ¶æ€åˆ†æ**ï¼šè¯¦ç»†åˆ†æçº¿ç¨‹çŠ¶æ€åˆ†å¸ƒï¼ˆRUNNABLEã€WAITINGã€BLOCKEDç­‰ï¼‰
- **ğŸ‘¥ çº¿ç¨‹åˆ†ç»„**ï¼šæ™ºèƒ½åˆ†ç±»çº¿ç¨‹ï¼ˆNetty NIOã€gRPCã€OkHttpã€çº¿ç¨‹æ± ç­‰ï¼‰
- **âš ï¸ é—®é¢˜æ£€æµ‹**ï¼šè‡ªåŠ¨è¯†åˆ«æ½œåœ¨çš„çº¿ç¨‹é˜»å¡å’Œæ€§èƒ½é—®é¢˜
- **ğŸ“± å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒä¸åŒå±å¹•å°ºå¯¸çš„è®¾å¤‡æŸ¥çœ‹
- **ğŸ¯ å»é‡å±•ç¤º**ï¼šæ™ºèƒ½å»é™¤é‡å¤çº¿ç¨‹ï¼Œåªæ˜¾ç¤ºä»£è¡¨æ€§çº¿ç¨‹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…è¦æ±‚

- Python 3.6+
- æ ‡å‡†åº“ä¾èµ–ï¼š`re`, `os`, `sys`, `argparse`, `datetime`, `collections`, `pathlib`

### åŸºæœ¬ä½¿ç”¨

```bash
# åˆ†æjstackè¾“å‡ºæ–‡ä»¶
python jstack-analyzer.py /path/to/jstack_output.txt

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶å
python jstack-analyzer.py /path/to/jstack_output.txt -o my_report.html

# é€‰æ‹©ä¸»é¢˜
python jstack-analyzer.py /path/to/jstack_output.txt -t modern

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ä¸»é¢˜
python jstack-analyzer.py --list-themes
```

### å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | ç®€å†™ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `input_file` | - | å¿…éœ€ | jstackè¾“å‡ºæ–‡ä»¶è·¯å¾„ |
| `--output` | `-o` | `jstack_report.html` | è¾“å‡ºHTMLæ–‡ä»¶å |
| `--theme` | `-t` | `minimal` | è®¾è®¡ä¸»é¢˜ |
| `--list-themes` | - | False | åˆ—å‡ºæ‰€æœ‰å¯ç”¨ä¸»é¢˜ |

## ğŸ¨ å¯ç”¨ä¸»é¢˜

| ä¸»é¢˜å | æè¿° | ç‰¹ç‚¹ |
|--------|------|------|
| `minimal` | ç®€çº¦ä¸“ä¸š | å¹²å‡€çš„è®¾è®¡ï¼Œç»†å¾®æ¸å˜ï¼Œé€‚åˆä¼ä¸šç¯å¢ƒ |
| `modern` | ç°ä»£æ—¶å°š | ç»¿è‰²è°ƒä¸»é¢˜ï¼Œå½“ä»£è®¾è®¡é£æ ¼ |
| `classic` | ç»å…¸ä¼ ç»Ÿ | å•è‰²è°ƒè®¾è®¡ï¼Œç´«è‰²ç‚¹ç¼€ï¼Œä¼ ç»Ÿé£æ ¼ |

## ğŸ“Š æŠ¥å‘Šå†…å®¹

ç”Ÿæˆçš„HTMLæŠ¥å‘ŠåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

### 1. ğŸ“ˆ ç»Ÿè®¡æ¦‚è§ˆ
- æ€»çº¿ç¨‹æ•°
- å®ˆæŠ¤çº¿ç¨‹æ•°
- éå®ˆæŠ¤çº¿ç¨‹æ•°
- é˜»å¡çº¿ç¨‹æ•°

### 2. ğŸ“Š çº¿ç¨‹çŠ¶æ€åˆ†å¸ƒ
- RUNNABLEï¼ˆå¯è¿è¡Œï¼‰
- WAITINGï¼ˆç­‰å¾…ï¼‰
- TIMED_WAITINGï¼ˆé™æ—¶ç­‰å¾…ï¼‰
- BLOCKEDï¼ˆé˜»å¡ï¼‰
- å¯è§†åŒ–è¿›åº¦æ¡å±•ç¤ºå„çŠ¶æ€å æ¯”

### 3. ğŸ“‹ çº¿ç¨‹åˆ†ç»„ç»Ÿè®¡
æŒ‰åŠŸèƒ½åˆ†ç»„å±•ç¤ºçº¿ç¨‹ï¼š
- Netty NIO
- gRPC
- OkHttp
- Thread Pool
- HTTP Keep-Alive
- JVMç›¸å…³çº¿ç¨‹ï¼ˆAttach Listenerã€Finalizerã€Reference Handlerç­‰ï¼‰

### 4. ğŸ§µ è¯¦ç»†çº¿ç¨‹ä¿¡æ¯
æ¯ä¸ªçº¿ç¨‹çš„è¯¦ç»†ä¿¡æ¯ï¼š
- çº¿ç¨‹åç§°
- çº¿ç¨‹ID
- çº¿ç¨‹çŠ¶æ€
- æ˜¯å¦å®ˆæŠ¤çº¿ç¨‹
- ä¼˜å…ˆçº§
- å †æ ˆè·Ÿè¸ªï¼ˆå‰3è¡Œï¼‰

### 5. ğŸ” å¸¸è§å †æ ˆæ¨¡å¼
- å‡ºç°é¢‘ç‡æœ€é«˜çš„å †æ ˆè·Ÿè¸ª
- å æ¯”ç»Ÿè®¡
- å¸®åŠ©è¯†åˆ«çƒ­ç‚¹ä»£ç 

### 6. âš ï¸ é—®é¢˜é¢„è­¦
- é˜»å¡çº¿ç¨‹è­¦å‘Š
- é«˜é˜»å¡ç‡å±é™©æç¤º
- æ€§èƒ½é—®é¢˜å»ºè®®

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### æ ¸å¿ƒç»„ä»¶

1. **ThreadInfoç±»**ï¼šå°è£…çº¿ç¨‹ä¿¡æ¯
2. **JStackAnalyzerç±»**ï¼šæ ¸å¿ƒåˆ†æå¼•æ“
3. **FrontendDesignStylingç±»**ï¼šå‰ç«¯æ ·å¼ç³»ç»Ÿ

### åˆ†ææµç¨‹

```
è¾“å…¥æ–‡ä»¶ â†’ è§£æçº¿ç¨‹å— â†’ æå–ä¿¡æ¯ â†’ åˆ†ç±»ç»Ÿè®¡ â†’ ç”ŸæˆHTML
```

### æ™ºèƒ½å»é‡ç®—æ³•

ä¸ºé¿å…æŠ¥å‘Šä¸­æ˜¾ç¤ºè¿‡å¤šç›¸ä¼¼çº¿ç¨‹ï¼Œç³»ç»Ÿä¼šï¼š
- æå–çº¿ç¨‹åç§°çš„åŸºç¡€æ¨¡å¼
- ç§»é™¤æ•°å­—åç¼€å’Œå˜ä½“
- æ¯ä¸ªæ¨¡å¼åªæ˜¾ç¤ºä¸€ä¸ªä»£è¡¨æ€§çº¿ç¨‹

## ğŸ“ æ–‡ä»¶ç»“æ„

```
jstack-analyzer/
â”œâ”€â”€ jstack-analyzer.py          # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ jstack_analyzer.py      # æ ¸å¿ƒåˆ†æé€»è¾‘
â”‚   â””â”€â”€ frontend_design_integration.py  # å‰ç«¯æ ·å¼ç³»ç»Ÿ
â””â”€â”€ README.md                   # è¯´æ˜æ–‡æ¡£
```

## ğŸ”§ é…ç½®é€‰é¡¹

### ç¯å¢ƒå˜é‡

æ— éœ€ç‰¹æ®Šç¯å¢ƒå˜é‡é…ç½®ï¼Œä½¿ç”¨Pythonæ ‡å‡†åº“å³å¯è¿è¡Œã€‚

### è‡ªå®šä¹‰æ ·å¼

å¯ä»¥é€šè¿‡ä¿®æ”¹`frontend_design_integration.py`æ–‡ä»¶ä¸­çš„`get_color_schemes()`æ–¹æ³•æ¥è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²ã€‚

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ–‡ä»¶æœªæ‰¾åˆ°é”™è¯¯**
   ```
   Error: Input file 'jstack.txt' not found
   ```
   - æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
   - ç¡®ä¿æ–‡ä»¶å­˜åœ¨ä¸”å¯è¯»

2. **ç¼–ç é—®é¢˜**
   - ç¡®ä¿jstackè¾“å‡ºæ–‡ä»¶ä½¿ç”¨UTF-8ç¼–ç 
   - é¿å…æ–‡ä»¶åŒ…å«ç‰¹æ®Šå­—ç¬¦

3. **å†…å­˜ä¸è¶³**
   - å¤§å‹jstackæ–‡ä»¶ï¼ˆ>100MBï¼‰å¯èƒ½éœ€è¦æ›´å¤šå†…å­˜
   - å»ºè®®åœ¨æ€§èƒ½è¾ƒå¥½çš„æœºå™¨ä¸Šåˆ†æ

### æ€§èƒ½ä¼˜åŒ–

- å¤§æ–‡ä»¶åˆ†ææ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œçº¿ç¨‹å»é‡
- ç”Ÿæˆçš„HTMLæ–‡ä»¶é€šå¸¸å°äº5MB
- æ”¯æŒç°ä»£æµè§ˆå™¨çš„å“åº”å¼åŠ è½½

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåŸºæœ¬åˆ†æ
```bash
python jstack-analyzer.py /tmp/app_jstack.txt
```
ç”Ÿæˆï¼š`jstack_report.html`

### ç¤ºä¾‹2ï¼šè‡ªå®šä¹‰ä¸»é¢˜å’Œè¾“å‡º
```bash
python jstack-analyzer.py /tmp/app_jstack.txt -o production_analysis.html -t modern
```
ç”Ÿæˆï¼š`production_analysis.html`ï¼ˆç°ä»£ä¸»é¢˜ï¼‰

### ç¤ºä¾‹3ï¼šæŸ¥çœ‹ä¸»é¢˜é€‰é¡¹
```bash
python jstack-analyzer.py --list-themes
```
è¾“å‡ºï¼š
```
Available themes:
  minimal: Minimal - Clean, professional design with subtle gradients
  modern: Modern - Contemporary design with green accents
  classic: Classic - Traditional monochrome design with subtle purple accents
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤é—®é¢˜æŠ¥å‘Šå’Œæ”¹è¿›å»ºè®®ï¼

### å¼€å‘ç¯å¢ƒè®¾ç½®

1. å…‹éš†ä»£ç 
2. ç¡®ä¿Python 3.6+ç¯å¢ƒ
3. æµ‹è¯•ä¸åŒjstackè¾“å‡ºæ–‡ä»¶
4. éªŒè¯HTMLæŠ¥å‘Šç”Ÿæˆ

### æµ‹è¯•

å»ºè®®ä½¿ç”¨ä¸åŒç±»å‹åº”ç”¨çš„jstackè¾“å‡ºè¿›è¡Œæµ‹è¯•ï¼š
- Webåº”ç”¨ï¼ˆTomcatã€Spring Bootï¼‰
- å¾®æœåŠ¡åº”ç”¨
- å¤§æ•°æ®å¤„ç†åº”ç”¨
- é«˜å¹¶å‘åº”ç”¨

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚

## ğŸ”— ç›¸å…³èµ„æº

- [Java Thread Dumpåˆ†ææŒ‡å—](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/thread002.html)
- [JStackå·¥å…·ä½¿ç”¨æ–‡æ¡£](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr018.html)
- [Javaå¹¶å‘ç¼–ç¨‹æœ€ä½³å®è·µ](https://docs.oracle.com/javase/tutorial/essential/concurrency/)

---

**ğŸ¯ æç¤º**ï¼šå®šæœŸç”Ÿæˆå’Œåˆ†æçº¿ç¨‹è½¬å‚¨æœ‰åŠ©äºåŠæ—¶å‘ç°å’Œè§£å†³Javaåº”ç”¨çš„æ€§èƒ½é—®é¢˜ï¼